<script>
    $(document).ready(function() {
        var hash = $(location).attr('hash');
        var scrollPos = (hash) ? $(hash).offset().top : 0
        var setFocus = function() {
            console.log(">>>iframe stealing focus !");
            $('html, body').animate({ scrollTop: scrollPos}, 1);
            $("#main").focus();
            $("#carto_iframe").blur();
        }
        $("#carto_iframe").load(function () {
            console.debug('>>>> iFrame loaded!');
            setTimeout(function() {
                $('html, body').animate({ scrollTop: scrollPos}, 1);
            }, 300);
        });
	    $("#carto_iframe").focus(setFocus());
        $("#carto_iframe").ready(console.log(">>>> iframe ready !"))
	});
</script>


<span style="display:block;text-align:center;color:white;font-size:3rem;text-transform:uppercase;padding-top:50px;float: right; margin-right: 30px;">
    <iframe id="carto_iframe" width="970px" height="650px" src="{{ carto_base_url }}{% if instance.carto %}{{ instance.carto.slug}}{% endif %}"/>
</span>
